<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redbooth Studios | Premium Beats</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #FF004C;
            --secondary: #00F2FF;
            --bg: #0b0b0b;
            --card-bg: #161616;
            --text: #ffffff;
            --text-dim: #a0a0a0;
            --whatsapp: #25D366;
            --youtube: #FF0000;
            --pad-m: 25px;
            --pad-s: 15px;
            --gap: 20px;
        }

        body {
            font-family: 'Inter', sans-serif;
            margin:0; padding:0;
            background: var(--bg);
            color: var(--text);
            scroll-behavior: smooth;
            padding-bottom: 110px;
        }

        header {
            background: linear-gradient(135deg, #000, #1a0008, var(--primary));
            padding: 40px var(--pad-m);
            text-align: center;
            border-bottom: 3px solid var(--primary);
        }
        header h1 { margin: 0; font-size: clamp(1.8rem, 5vw, 3rem); text-transform: uppercase; letter-spacing: 3px; font-weight: 800; }
        .studio-tag { background: rgba(0,0,0,0.5); padding: 6px 15px; border-radius: 30px; display: inline-flex; align-items: center; gap: 10px; font-size: 0.8rem; margin-top: 12px; border: 1px solid #333; }
        .pulse { width: 8px; height: 8px; background: var(--secondary); border-radius: 50%; animation: pulse-glow 1.5s infinite; }
        @keyframes pulse-glow { 0% { opacity: 1; transform: scale(1); } 50% { opacity: 0.4; transform: scale(1.2); } 100% { opacity: 1; transform: scale(1); } }

        .slider-section { background: #000; padding: 15px 0; border-bottom: 1px solid #222; overflow: hidden; position: relative; }
        .marquee { display: flex; width: max-content; animation: marquee-scroll 40s linear infinite; align-items:center; }
        .marquee img { height: 65px; width: 65px; border-radius: 50%; margin: 0 15px; border: 2px solid var(--primary); object-fit: cover; }
        @keyframes marquee-scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

        nav { background: rgba(11,11,11,0.95); padding: var(--pad-s); position: sticky; top: 0; z-index: 100; backdrop-filter: blur(15px); border-bottom: 1px solid #333; text-align: center; }
        #beat-search { width: 90%; max-width: 500px; padding: 10px 20px; border-radius: 25px; border: 1px solid #444; background: #1a1a1a; color: white; outline: none; font-size: 0.95rem; }

        .main-layout { display: grid; grid-template-columns: 1fr; gap: var(--gap); max-width: 1300px; margin: auto; padding: var(--pad-m); }
        @media (min-width: 1024px) { .main-layout { grid-template-columns: 1fr 320px; gap: 30px; } }

        .genre-folder { margin-bottom: 15px; border: 1px solid #222; border-radius: 10px; overflow: hidden; background: #111; }
        .genre-header { background: #1a1a1a; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .genre-header h2 { margin: 0; font-size: 1rem; color: var(--primary); text-transform: uppercase; }
        .genre-content { display: none; padding: 20px; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; }
        .genre-content.active { display: grid; }

        .media-card { background: var(--card-bg); padding: 20px; border-radius: 12px; border: 1px solid #222; }
        .play-btn { background: var(--primary); border: none; width: 42px; height: 42px; border-radius: 50%; color: white; cursor: pointer; display:inline-flex; align-items:center; justify-content:center; }

        .bottom-features {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--gap);
            margin-top: 25px;
            text-align: center;
            justify-content: center;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        @media (min-width: 768px) { .bottom-features { grid-template-columns: 1fr 1fr; } }
        .feature-card { background: #111; padding: var(--pad-m); border-radius: 12px; border: 1px solid #222; }
        .feature-card h3 { color: var(--secondary); margin-top: 0; font-size: 1rem; text-transform: uppercase; }
        .contact-links { display: flex; justify-content: center; gap: 20px; margin-top: 15px; font-size: 1.6rem; }
        .contact-links a { color: var(--text); }

        .yt-premium-box { background: #111; padding: 20px; border-radius: 12px; text-align: center; border: 1px solid #333; margin-bottom: 20px; }
        .buy-btn { width: 100%; background: none; border: 1px solid var(--primary); padding: 10px; border-radius: 6px; color: var(--primary); cursor: pointer; font-weight: 800; margin-top: 10px; font-size: 0.85rem; transition: 0.3s; }
        .buy-btn:hover { background: var(--primary); color: white; }
        .checkout-now { background: var(--whatsapp); color: black; border: none; }

        #master-player { position: fixed; bottom: 0; left: 0; width: 100%; height: 100px; background: #000; border-top: 2px solid var(--secondary); display: none; align-items: center; justify-content: space-between; padding: 0 25px; z-index: 1000; box-sizing: border-box; }
        .prog-container { flex-grow: 1; max-width: 550px; position: relative; height: 50px; display: flex; flex-direction: column; justify-content: center; margin: 0 20px; }
        #wave-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; opacity: 0.7; }
        #m-prog { position: relative; width: 100%; appearance: none; background: transparent; cursor: pointer; z-index: 5; }

        #payment-modal, #auth-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center; }
        .modal-content { background: var(--card-bg); padding: 30px; border-radius: 15px; width: 90%; max-width: 380px; text-align: center; border: 2px solid var(--secondary); }
        .m-input { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #444; background: #000; color: white; text-align: center; box-sizing: border-box; }

        @media (max-width: 768px) { #master-player { height: 140px; flex-direction: column; padding: 15px; } .prog-container { width: 100%; margin: 10px 0; } }
    </style>
</head>
<body>

<div id="payment-modal">
    <div class="modal-content">
        <h2 style="color:var(--secondary); margin-top:0; font-size: 1.2rem;">Mobile Money</h2>
        <select id="network-type" class="m-input"><option value="airtel">Airtel Money</option><option value="tnm">TNM Mpamba</option></select>
        <input type="tel" id="user-phone" class="m-input" placeholder="099 / 088..." maxlength="10">
        <button class="buy-btn checkout-now" onclick="processSTKPush()">PAY NOW</button>
        <button class="buy-btn" style="border:none; color:var(--text-dim);" onclick="closePayment()">Cancel</button>
    </div>
</div>

<div id="auth-modal">
    <div class="modal-content">
        <div id="signin-view">
            <h2 style="color:var(--secondary); margin-top:0; font-size: 1.2rem;">VIP Access</h2>
            <input type="email" id="login-email" class="m-input" placeholder="Email Address">
            <input type="password" id="login-pass" class="m-input" placeholder="Password">
            <button class="buy-btn checkout-now" onclick="handleAuth('login')">SIGN IN</button>
            <p style="font-size: 0.8rem; margin-top: 15px;">New? <span style="color:var(--primary); cursor:pointer;" onclick="toggleAuthView('register')">Create Account</span></p>
        </div>
        <div id="register-view" style="display:none;">
            <h2 style="color:var(--primary); margin-top:0; font-size: 1.2rem;">Join VIP</h2>
            <input type="email" id="reg-email" class="m-input" placeholder="Enter Email">
            <input type="password" id="reg-pass" class="m-input" placeholder="Password">
            <button class="buy-btn" style="background:var(--primary); color:white; border:none;" onclick="handleAuth('register')">REGISTER</button>
            <p style="font-size: 0.8rem; margin-top: 15px;">Member? <span style="color:var(--secondary); cursor:pointer;" onclick="toggleAuthView('signin')">Sign In</span></p>
        </div>
        <button class="buy-btn" style="border:none; color:var(--text-dim);" onclick="closeAuthModal()">Cancel</button>
    </div>
</div>

<header>
    <h1>Redbooth Studios</h1>
    <div class="studio-tag"><div class="pulse"></div> <span style="color: var(--secondary);">PRODUCED BY STEVE CHRISS MW</span></div>
</header>

<div class="slider-section">
    <div class="marquee" id="artist-slider"></div>
</div>

<nav><input type="text" id="beat-search" placeholder="Search Trap, Afrobeat, Drill..." oninput="handleSearch()"></nav>

<div class="main-layout">
    <section>
        <div id="beats-container"></div>

        <div class="bottom-features">
            <div class="feature-card">
                <h3>Contact Us</h3>
                <p style="font-size: 0.85rem; color: var(--text-dim);">Quality beats for professional artists.</p>
                <div class="contact-links">
                    <a href="mailto:redboothstudios1@gmail.com"><i class="fas fa-envelope"></i></a>
                    <a href="https://wa.me/265887347767" target="_blank"><i class="fab fa-whatsapp"></i></a>
                    <a href="https://www.instagram.com/steve-chriss-mw.instagram/" target="_blank"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
            <div class="feature-card">
                <h3>VIP Services</h3>
                <p style="font-size: 0.85rem; color: var(--text-dim);">VIP Beats + Bonuses + Project Stems.</p>
                <div style="display:flex; gap:10px;">
                    <button class="buy-btn" style="flex:1;" onclick="openAuth('signin')">SIGN IN</button>
                    <button class="buy-btn" style="flex:1; border-color:var(--secondary); color:var(--secondary);" onclick="openAuth('register')">REGISTER</button>
                </div>
            </div>
        </div>
    </section>

    <aside>
        <div class="yt-premium-box">
            <h3 style="color:var(--secondary); font-size: 1rem;">FREE BEATS</h3>
            <a href="https://www.youtube.com/@stevechrissmw?sub_confirmation=1" target="_blank" class="buy-btn" style="text-decoration:none; display:block; background:#fff; color:#000; border:none;">SUBSCRIBE</a>
        </div>
        <div class="yt-premium-box">
            <h3 style="font-size: 1rem;">YOUR CART</h3>
            <div id="cart-list" style="text-align:left; max-height: 180px; overflow-y: auto; font-size: 0.85rem;"></div>
            <div id="cart-total" style="font-size:1.5rem; color:var(--secondary); margin:10px 0; font-weight: 800;">K0</div>
            <button class="buy-btn checkout-now" onclick="checkout()">CHECKOUT</button>
        </div>
    </aside>
</div>

<div id="master-player">
    <div style="display:flex; align-items:center; gap:12px; width:220px;">
        <button class="play-btn" id="m-btn" onclick="toggleM()"><i class="fas fa-play"></i></button>
        <div id="m-name" style="font-weight:800; font-size:0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">Beat Name</div>
    </div>
    <div class="prog-container">
        <canvas id="wave-canvas"></canvas>
        <input type="range" id="m-prog" min="0" max="100" value="0" step="0.1" oninput="seekM(this)">
        <div style="display:flex; justify-content:space-between; font-size:0.65rem; color:#666; margin-top:4px;">
            <span id="m-curr">0:00</span>
            <span id="m-dur">0:00</span>
        </div>
    </div>
    <div style="width:100px;"><input type="range" min="0" max="1" step="0.05" value="1" oninput="volM(this)" style="accent-color:var(--secondary); width:100%;"></div>
</div>

<script>
const beatsData = {
    "Trap": [
        { id: 101, name: "Around", price: 10000, file: "audio/trap/Around.mp3" },
        { id: 102, name: "Attributes_Sky", price: 10000, file: "audio/trap/Attributes_Sky.mp3" },
        { id: 103, name: "Awareness", price: 10000, file: "audio/trap/Awareness.mp3" },
        { id: 104, name: "Galaxy", price: 10000, file: "audio/trap/Galaxy.mp3" },
        { id: 105, name: "Not_Again", price: 10000, file: "audio/trap/Not_Again.mp3" },
        { id: 106, name: "Nueva", price: 10000, file: "audio/trap/Nueva.mp3" },
        { id: 107, name: "Rappers Choice", price: 10000, file: "audio/trap/Rappers_Choice.mp3" },
        { id: 108, name: "Space", price: 10000, file: "audio/trap/Space.mp3" },
        { id: 109, name: "To_Ghettoh", price: 10000, file: "audio/trap/To_Ghettoh.mp3" },
        { id: 110, name: "Twilightlight", price: 10000, file: "audio/trap/Twightlight.mp3" }
    ],
    "Drill": [{ id: 2, name: "Storm Drill", price: 12000, file: "audio/drill/Storm.mp3" }],
    "Afrobeat": [{ id: 3, name: "Lagos Night", price: 15000, file: "audio/afro/Lagos.mp3" }],
    "Dancehall": [{ id: 4, name: "Island Riddim", price: 10000, file: "audio/dance/Island.mp3" }],
    "Hip Hop": [{ id: 5, name: "Legendary", price: 12000, file: "audio/hiphop/Legend.mp3" }],
    "EDM": [{ id: 6, name: "Neon Lights", price: 15000, file: "audio/edm/Neon.mp3" }],
    "Pop": [{ id: 7, name: "Radio Star", price: 13000, file: "audio/pop/Star.mp3" }],
    "Amapiano": [{ id: 8, name: "Piano Vibes", price: 15000, file: "audio/amapiano/Vibes.mp3" }],
    "Kwaito": [{ id: 9, name: "Summer Days", price: 10000, file: "audio/kwaito/Summer.mp3" }],
    "UK-Afro": [{ id: 10, name: "London Vibe", price: 12000, file: "audio/ukafro/London.mp3" }]
};

let cart = [], currentAudio = null, currentId = null;
let audioCtx, analyser, source, canvas, ctx, dataArray, bufferLength;

function init() {
    const slider = document.getElementById('artist-slider');
    const artists = [1,2,3,4,5,6,7,8];
    slider.innerHTML = artists.map(i => `<img src="artists/artist${i}.jpg">`).join('') + artists.map(i => `<img src="artists/artist${i}.jpg">`).join('');
    canvas = document.getElementById('wave-canvas'); ctx = canvas.getContext('2d'); renderBeats();
}

function renderBeats() {
    const container = document.getElementById('beats-container');
    const query = document.getElementById('beat-search').value.toLowerCase();
    container.innerHTML = '';
    Object.keys(beatsData).sort().forEach(genre => {
        const filtered = beatsData[genre].filter(b => b.name.toLowerCase().includes(query));
        if (filtered.length > 0) {
            const folder = document.createElement('div');
            folder.className = 'genre-folder';
            folder.innerHTML = `<div class="genre-header" onclick="this.nextElementSibling.classList.toggle('active')"><h2>${genre}</h2><i class="fas fa-chevron-down"></i></div>
            <div class="genre-content">${filtered.map(b => `
                <div class="media-card">
                    <h3 style="margin-top:0; font-size: 1rem;">${b.name}</h3>
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <button class="play-btn" onclick="playB('${b.file}', '${b.name}', ${b.id})"><i class="fas fa-play" id="icon-${b.id}"></i></button>
                        <span style="font-weight:800; color:var(--secondary)">K${b.price.toLocaleString()}</span>
                    </div>
                    <button class="buy-btn" onclick="addC(${b.id},'${b.name}',${b.price})">ADD TO CART</button>
                </div>`).join('')}</div>`;
            container.appendChild(folder);
        }
    });
}

function playB(file, name, id) {
    if (currentAudio && currentId === id) { toggleM(); return; }
    if (currentAudio) { currentAudio.pause(); document.getElementById(`icon-${currentId}`).className = 'fas fa-play'; }
    currentAudio = new Audio(file); currentId = id;
    document.getElementById('master-player').style.display = 'flex';
    document.getElementById('m-name').innerText = name;
    currentAudio.play().then(() => {
        if (!audioCtx) { audioCtx = new (window.AudioContext || window.webkitAudioContext)(); analyser = audioCtx.createAnalyser(); source = audioCtx.createMediaElementSource(currentAudio); source.connect(analyser); analyser.connect(audioCtx.destination); bufferLength = analyser.frequencyBinCount; dataArray = new Uint8Array(bufferLength); }
        else if (source.mediaElement !== currentAudio) { source.disconnect(); source = audioCtx.createMediaElementSource(currentAudio); source.connect(analyser); }
        audioCtx.resume(); drawWave();
    }).catch(e => console.log("Audio Blocked"));
    document.getElementById(`icon-${id}`).className = 'fas fa-pause';
    document.getElementById('m-btn').innerHTML = '<i class="fas fa-pause"></i>';
    currentAudio.ontimeupdate = () => {
        const p = (currentAudio.currentTime / currentAudio.duration) * 100 || 0;
        document.getElementById('m-prog').value = p;
        document.getElementById('m-curr').innerText = fmt(currentAudio.currentTime);
        document.getElementById('m-dur').innerText = fmt(currentAudio.duration);
    };
}

function drawWave() {
    requestAnimationFrame(drawWave); if (!analyser) return;
    analyser.getByteFrequencyData(dataArray); canvas.width = canvas.offsetWidth; canvas.height = canvas.offsetHeight;
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    const barWidth = (canvas.width / bufferLength) * 2.5; let x = 0;
    for (let i = 0; i < bufferLength; i++) {
        let barHeight = dataArray[i] / 2.5; ctx.fillStyle = i % 2 === 0 ? '#FF004C' : '#00F2FF';
        ctx.fillRect(x, canvas.height - barHeight, barWidth, barHeight); x += barWidth + 1;
    }
}

function toggleM() {
    if (!currentAudio) return;
    if (currentAudio.paused) { audioCtx?.resume(); currentAudio.play(); document.getElementById('m-btn').innerHTML = '<i class="fas fa-pause"></i>'; document.getElementById(`icon-${currentId}`).className = 'fas fa-pause'; }
    else { currentAudio.pause(); document.getElementById('m-btn').innerHTML = '<i class="fas fa-play"></i>'; document.getElementById(`icon-${currentId}`).className = 'fas fa-play'; }
}

function fmt(s) { if(!isFinite(s)) return '0:00'; let m=Math.floor(s/60), r=Math.floor(s%60); return `${m}:${r<10?'0':''}${r}`; }
function seekM(s) { if(currentAudio) currentAudio.currentTime = (s.value/100) * currentAudio.duration; }
function volM(s) { if(currentAudio) currentAudio.volume = s.value; }
function addC(id, n, p) { if(!cart.find(i => i.n === n)) { cart.push({n, p}); renderC(); } else { alert("Already in cart"); } }

function renderC() {
    document.getElementById('cart-list').innerHTML = cart.map((i, idx) => `
        <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
            <span>${i.n}</span>
            <i class="fas fa-trash" onclick="removeFromCart(${idx})" style="color:red; cursor:pointer"></i>
        </div>`).join('');
    document.getElementById('cart-total').innerText = "K" + cart.reduce((a,b)=>a+b.p,0).toLocaleString();
}

function removeFromCart(index) { cart.splice(index, 1); renderC(); }
function checkout() { if (cart.length === 0) return alert("Your cart is empty!"); document.getElementById('payment-modal').style.display = 'flex'; }
function closePayment() { document.getElementById('payment-modal').style.display = 'none'; }
function processSTKPush() {
    const phone = document.getElementById('user-phone').value; if (phone.length < 10) return alert("Invalid phone");
    alert(`STK Push sent to ${phone}. Enter PIN.`); closePayment(); cart = []; renderC();
}

function openAuth(view) { document.getElementById('auth-modal').style.display = 'flex'; toggleAuthView(view); }
function closeAuthModal() { document.getElementById('auth-modal').style.display = 'none'; }
function toggleAuthView(view) {
    document.getElementById('signin-view').style.display = view === 'signin' ? 'block' : 'none';
    document.getElementById('register-view').style.display = view === 'register' ? 'block' : 'none';
}
function handleAuth(type) { alert("Success!"); closeAuthModal(); }
function handleSearch() { renderBeats(); }
window.onload = init;
</script>
</body>
</html>

